{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "packageRules": [
    {
      "matchDepNames": [
        "hypothesis"
      ],
      "enabled": false,
      "description": "Do not update hypothesis"
    },
    {
      "matchFileNames": [
        "pyproject.toml"
      ],
      "matchDepTypes": [
        "build-system"
      ],
      "commitMessageTopic": "build dependency {{depName}}",
      "commitMessageAction": "update",
      "commitMessageExtra": "{{#if newValue}}{{newValue}}{{else}}{{newVersion}}{{/if}}"
    },
    {
      "matchManagers": [
        "circleci"
      ]
    }
  ],
  "customManagers": [
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/pyproject.toml/",
        "/requirements*.txt/"
      ],
      "matchStrings": [
        "mypy\\[mypyc\\]==1\\.14\\.1; python_version ?== ?['\\\"]3\\.8['\\\"]"
      ],
      "depNameTemplate": "mypy",
      "currentValueTemplate": "1.14.1",
      "datasourceTemplate": "pypi",
      "description": "Do not update mypy for Python 3.8 pins"
    },
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/requirements-mypy.txt/"
      ],
      "matchStrings": [
        "mypy>=1\\.14\\.1,<([0-9a-zA-Z\\.]+)"
      ],
      "depNameTemplate": "mypy",
      "currentValueTemplate": ">=1.14.1,<{{{currentValue}}}",
      "datasourceTemplate": "pypi",
      "versioningTemplate": "python",
      "extractVersionTemplate": "$1",
      "description": "Allow Renovate to update only the upper bound of mypy, keep lower bound at 1.14.1"
    },
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/setup.py/"
      ],
      "matchStrings": [
        "python_requires\\s*=\\s*\"[>=]*([0-9.]+)"
      ],
      "depNameTemplate": "python-minimum",
      "currentValueTemplate": "{{{currentValue}}}",
      "datasourceTemplate": "python",
      "versioningTemplate": "python",
      "extractVersionTemplate": "$1",
      "description": "Extract minimum supported Python version from setup.py"
    },
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/.github/workflows/stubgen.yaml/"
      ],
      "matchStrings": [
        "python-version: '([0-9.]+)'"
      ],
      "depNameTemplate": "python-minimum",
      "currentValueTemplate": "'{{{currentValue}}}'",
      "datasourceTemplate": "python",
      "versioningTemplate": "python",
      "extractVersionTemplate": "\\1",
      "description": "Ensure stubs are produced on the lowest supported Python version (synced from setup.py)."
    }
  ]
}
